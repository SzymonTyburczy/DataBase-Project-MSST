create table Courses
(
    Course_ID      int          not null
        constraint Courses_pk
            primary key,
    Name           nvarchar(30) not null,
    Description    nvarchar(30) not null,
    Form           nvarchar(20) not null,
    Price          money        not null,
    Coordinator_ID int          not null
)
go

create table Exchange_Rate
(
    Currency_ID int   not null
        constraint Exchange_Rate_pk
            primary key,
    Zloty       money not null,
    Euro        money not null,
    Dolar       money not null,
    Funt        money not null
)
go

create table Language
(
    Language_ID int          not null
        constraint Language_pk
            primary key,
    Language    nvarchar(20) not null
)
go

create table Orders
(
    Order_ID     int           not null
        constraint Orders_pk
            primary key,
    Client_ID    int           not null,
    Order_Date   datetime      not null,
    Payment_Link nvarchar(max) not null
)
go

create table Orders_Details
(
    Details_ID       int      not null
        constraint Orders_Details_pk
            primary key,
    Order_ID         int      not null
        constraint Orders_OrderDetails
            references Orders,
    Payment_Deadline datetime not null,
    Currency_ID      int      not null
        constraint ExchangeRate_OrderDetails
            references Exchange_Rate,
    Amount           money    not null
)
go

create table Course_Orders
(
    Details_ID int not null
        constraint Course_Orders_pk
            primary key
        constraint OrderDetails_CourseOrders
            references Orders_Details,
    Course_ID  int not null
        constraint Courses_CoursesOrders
            references Courses
)
go

create table Participant_Course
(
    Participant_ID        int not null
        constraint Participant_Course_pk
            primary key,
    Course_ID             int not null
        constraint Courses_ParticipantCourse
            references Courses,
    Completion_Percentage int not null
)
go

create table Participant_Webinar
(
    Webinar_ID      int not null,
    Participant_ID  int not null,
    Webinar_Payment bit not null,
    Webinar_Access  bit not null,
    constraint Participant_Webinar_pk
        primary key (Webinar_ID, Participant_ID)
)
go

create table Position
(
    Position_ID   int          not null
        constraint Position_pk
            primary key,
    Position_Name nvarchar(40) not null,
    Permisstions  nvarchar(40) not null
)
go

create table Employees
(
    Employee_ID int          not null
        constraint Employees_pk
            primary key,
    First_Name  nvarchar(20) not null,
    Last_Name   nvarchar(20) not null,
    Position_ID int          not null
        constraint Positions_Employees
            references Position
)
go

create table Course_Meeting
(
    Course_Meeting_ID int          not null
        constraint Course_Meeting_pk
            primary key,
    Course_ID         int          not null
        constraint Courses_CourseMeeting
            references Courses,
    Form              nvarchar(20) not null,
    Date              datetime     not null,
    Duration          time         not null,
    Instructor_ID     int          not null
        constraint Employees_CourseMeeting
            references Employees,
    Language_ID       int          not null
        constraint Language_CourseMeeting
            references Language,
    Translator_ID     int
)
go

create table Course_Online_Async_Meeting
(
    Course_Meeting_ID int           not null
        constraint Course_Online_Async_Meeting_pk
            primary key
        constraint CourseMeeting_CourseOnlineAsyncMeeting
            references Course_Meeting,
    Link_To_Meeting   nvarchar(max) not null
)
go

create table Course_Online_Sync_Meeting
(
    Course_Meeting_ID int           not null
        constraint Course_Online_Sync_Meeting_pk
            primary key
        constraint CourseMeeting_CourseOnlineSyncMeeting
            references Course_Meeting,
    Link_To_Meeting   nvarchar(max) not null
)
go

create table Course_Stationary_Meeting
(
    Course_Meeting_ID int          not null
        constraint Course_Stationary_Meeting_pk
            primary key
        constraint CourseMeeting_CourseStationaryMeeting
            references Course_Meeting,
    Room              nvarchar(20) not null,
    Seats_Limit       int          not null
)
go

create table Participant_Meeting
(
    Course_Meeting_ID int not null
        constraint Participant_Meeting_pk
            primary key
        constraint CourseMeeting_ParticipantMeeting
            references Course_Meeting,
    Participant_ID    int not null
        constraint ParticipantCourse_ParticipantMeeting
            references Participant_Course,
    Attendance        bit
)
go

create table Students
(
    Student_ID int not null
        constraint Students_pk
            primary key,
    Studies_ID int not null
)
go

create table Studies
(
    Studies_ID          int   not null
        constraint Studies_pk
            primary key,
    Number_Of_Semesters int   not null,
    Fee                 money not null,
    Seat_Limit          int   not null
)
go

create table Grades
(
    Student_ID int not null
        constraint Student_Grades
            references Students,
    Subject_ID int not null,
    Studies_ID int not null
        constraint Studies_Grades
            references Studies,
    Grades     int not null,
    constraint Grades_pk
        primary key (Student_ID, Subject_ID, Studies_ID)
)
go

create table Internship
(
    Internship_ID int  not null
        constraint Internship_pk
            primary key,
    Studies_ID    int  not null
        constraint Studies_Internship
            references Studies,
    Start_Date    date not null
)
go

create table Student_Internship
(
    Student_ID    int not null
        constraint Student_StudentInternship
            references Students,
    Internship_ID int not null
        constraint Internship_StudentInternship
            references Internship,
    Completion    bit,
    constraint Student_Internship_pk
        primary key (Student_ID, Internship_ID)
)
go

create table Studies_Details
(
    Studies_ID     int           not null
        constraint Studies_Details_pk
            primary key,
    Name           nvarchar(40)  not null,
    Description    nvarchar(max) not null,
    Syllabus       nvarchar(max) not null,
    Coordinator_ID int           not null
        constraint Employees_StudiesDetails
            references Employees
)
go

create table Studies_Meeting
(
    Studies_Meeting_ID int not null
        constraint Studies_Meeting_pk
            primary key,
    Studies_ID         int not null,
    Subject_ID         int not null,
    Translator_ID      int,
    Language_ID        int not null
        constraint Language_StudiesMeeting
            references Language
)
go

create table Student_Meeting
(
    Student_ID       int  not null
        constraint Student_StudentMeeting
            references Students,
    Study_Meeting_ID int  not null
        constraint StudiesMeeting_Student_Meeting
            references Studies_Meeting,
    Attendance       bit,
    Meeting_Date     date not null,
    constraint Student_Meeting_pk
        primary key (Student_ID, Study_Meeting_ID)
)
go

create table Studies_Meeting_Details
(
    Study_Meeting_ID int          not null
        constraint Studies_Meeting_Details_pk
            primary key
        constraint StudiesMeeting_StudiesMeetingDetails
            references Studies_Meeting,
    Form             nvarchar(20) not null,
    Date             datetime     not null,
    Seat_Limit       int          not null,
    Duration         time         not null,
    Price            money        not null
)
go

create table Studies_Online_Async_Meeting
(
    Studies_Meeting_ID int           not null
        constraint Studies_Online_Async_Meeting_pk
            primary key
        constraint StudiesMeeting_StudiesOnlineAsyncMeeting
            references Studies_Meeting,
    Link_To_Meeting    nvarchar(max) not null
)
go

create table Studies_Online_Sync_Meeting
(
    Studies_Meeting_ID int           not null
        constraint Studies_Online_Sync_Meeting_pk
            primary key
        constraint StudiesMeeting_StudiesOnlineSyncMeeting
            references Studies_Meeting,
    Link_To_Meeting    nvarchar(max) not null
)
go

create table Studies_Orders
(
    Details_ID int not null
        constraint Studies_Orders_pk
            primary key,
    Studies_ID int not null
)
go

create table Studies_Stationary_Meeting
(
    Studies_Meeting_ID int          not null
        constraint Studies_Stationary_Meeting_pk
            primary key
        constraint StudiesMeeting_StudiesStationaryMeeting
            references Studies_Meeting,
    Room               nvarchar(20) not null
)
go

create table Subjects
(
    Subject_ID          int           not null
        constraint Subjects_pk
            primary key,
    Studies_ID          int           not null,
    Subject_Name        nvarchar(40)  not null,
    Subject_Description nvarchar(200) not null
)
go

create table Translator
(
    Translator_ID int not null
        constraint Translator_pk
            primary key
        constraint Employees_Translator
            references Employees,
    Language_ID   int not null
        constraint Language_Translator
            references Language
)
go

create table Users
(
    User_ID           int          not null
        constraint Users_pk
            primary key,
    First_Name        nvarchar(20) not null,
    Last_Name         nvarchar(20) not null,
    Account_Status    nvarchar(20) not null,
    Address           nvarchar(40) not null,
    Postal_Code       nvarchar(6)  not null,
    GDPR_Date_Consent date         not null
)
go

create table Webinar_Details
(
    Webinar_ID        int           not null
        constraint Webinar_Details_pk
            primary key,
    Price             money         not null,
    Details           nvarchar(max) not null,
    Link_To_Recording nvarchar(max) not null,
    Duration          int           not null
)
go

create table Webinar_Orders
(
    Details_ID int not null
        constraint Webinar_Orders_pk
            primary key,
    Webinar_ID int not null
)
go

create table Webinars
(
    Webinar_ID    int         not null
        constraint Webinars_pk
            primary key,
    Instructor_ID int         not null,
    Translator_ID int,
    Webinar_Name  varchar(40) not null,
    Webinar_Date  date        not null,
    Language_ID   int         not null
        constraint Language_Webinars
            references Language
)
go

